<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Village Help â€“ Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    body { font-family: Arial; background:#f2f2f2; }
    .box { max-width:450px; margin:auto; background:#fff; padding:20px; margin-top:20px; border-radius:10px; }
    input, button { width:100%; padding:10px; margin-top:10px; }
    button { background:#333; color:#fff; border:none; }
    .card { background:#eef6ff; padding:10px; margin-top:10px; border-radius:6px; }
  </style>
</head>

<body>

<!-- ğŸ” LOGIN -->
<div class="box" id="loginBox">
  <h2>ğŸ” Admin Login</h2>
  <input id="password" type="password" placeholder="Admin Password">
  <button onclick="login()">Login</button>
</div>

<!-- ğŸ“Š DASHBOARD -->
<div class="box" id="dashboard" style="display:none;">
  <h2>ğŸ“Š Admin Dashboard</h2>
  <button onclick="loadBookings()">ğŸ“‹ All Bookings</button>
  <button onclick="loadWorkers()">ğŸ‘· All Workers</button>
  <div id="data"></div>
</div>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyByMmFPEZEH6ECLKNHyL6RdvNrY-zWHBpU",
    authDomain: "village-help.firebaseapp.com",
    projectId: "village-help"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const ADMIN_PASSWORD = "Villaghelp123";

  function login() {
    if (password.value !== ADMIN_PASSWORD) {
      alert("Wrong password");
      return;
    }
    loginBox.style.display = "none";
    dashboard.style.display = "block";
  }

  // ğŸ“‹ BOOKINGS
  function loadBookings() {
    data.innerHTML = "";
    db.collection("bookings").orderBy("time","desc").get().then(snap=>{
      snap.forEach(doc=>{
        let d = doc.data();
        data.innerHTML += `
          <div class="card">
            <b>${d.service}</b><br>
            Customer: ${d.name} (${d.mobile})<br>
            Worker: ${d.workerName} (${d.workerMobile})<br>
            Village: ${d.village}<br>
            Status: ${d.status || "pending"}
          </div>
        `;
      });
    });
  }

  // ğŸ‘· WORKERS
  function loadWorkers() {
    data.innerHTML = "";
    db.collection("workers").get().then(snap=>{
      snap.forEach(doc=>{
        let w = doc.data();
        data.innerHTML += `
          <div class="card">
            <b>${w.name}</b><br>
            Mobile: ${w.mobile}<br>
            Service: ${w.service}<br>
            Active: ${w.active}
          </div>
        `;
      });
    });
  }
</script>

</body>
</html>
