<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Village Help â€“ Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;background:#f2f2f2}
.box{max-width:500px;margin:auto;background:#fff;padding:20px;margin-top:20px;border-radius:10px}
input,select,button{width:100%;padding:10px;margin-top:10px}
button{background:#333;color:#fff;border:none}
.card{background:#eef6ff;padding:10px;margin-top:10px;border-radius:6px}
</style>
</head>

<body>

<div class="box" id="loginBox">
<h2>Admin Login</h2>
<input id="password" type="password" placeholder="Admin Password">
<button onclick="login()">Login</button>
</div>

<div class="box" id="dashboard" style="display:none;">
<h3>Add Worker</h3>
<input id="wname" placeholder="Name">
<input id="wmobile" placeholder="Mobile (10 digit)">
<select id="wservice">
<option>Electrician</option>
<option>Plumber</option>
</select>
<button onclick="addWorker()">Add Worker</button>

<h3>All Workers</h3>
<div id="workers"></div>
</div>

<script>
const firebaseConfig={
apiKey:"AIzaSyDOBjOo5YsBndo8HPQv66ClmthIHqf0gmw",
authDomain:"village-help-6dda3.firebaseapp.com",
projectId:"village-help-6dda3",
storageBucket:"village-help-6dda3.firebasestorage.app",
messagingSenderId:"242196617492",
appId:"1:242196617492:web:a1dde8b7a42088f75b0a01"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();
const ADMIN_PASSWORD="Villaghelp123";

function login(){
if(password.value!==ADMIN_PASSWORD){alert("Wrong password");return;}
loginBox.style.display="none";
dashboard.style.display="block";
loadWorkers();
}

function addWorker(){
if(wmobile.value.length!==10){alert("10 digit number");return;}
db.collection("workers").add({
name:wname.value,
mobile:wmobile.value,
service:wservice.value,
active:true
});
wname.value="";wmobile.value="";
}

function loadWorkers(){
db.collection("workers").onSnapshot(s=>{
workers.innerHTML="";
s.forEach(d=>{
const w=d.data();
workers.innerHTML+=`
<div class="card">
<b>${w.name}</b><br>
${w.mobile} | ${w.service}<br>
Status: ${w.active?"Active":"Inactive"}<br>
<button onclick="toggle('${d.id}',${w.active})">
${w.active?"Deactivate":"Activate"}
</button>
</div>`;
});
});
}

function toggle(id,st){
db.collection("workers").doc(id).update({active:!st});
}
</script>
</body>
</html>
